/*! angular-tinyCarousel 1.0.1 2015-03-15 */
!function(){"use strict";angular.module("tinyCarousel",[]).directive("tinyCarousel",["$timeout","$raf",function(a,b){return{template:'<div class="buttons prev" ng-click="move(slideIndex - 1)" ng-show="carouselItems.length > slidesVisible"></div><div class="buttons next" ng-click="move(slideIndex + 1)" ng-show="carouselItems.length > slidesVisible"></div><div class="viewport">    <ul class="overview">        <li ng-repeat="item in carouselItems" compile="carouselTemplate" ng-click="itemClickDisabled || carouselItemClicked(item)"            ng-class="{\'left\': (slideIndex == $index), \'center\':  ((slideIndex + 1) == $index), \'right\': ((slideIndex + 2) == $index)}">        </li>        <li ng-repeat="item in carouselItemsMirrored" compile="carouselTemplate" ng-click="carouselItemClicked(item)"'+"            ng-class=\"{'left': (slideIndex == (carouselItems.length + $index)), 'center':  ((slideIndex + 1) == (carouselItems.length + $index)), 'right': ((slideIndex + 2) == (carouselItems.length + $index))}\">        </li>    </ul></div>",restrict:"A",scope:{tinycarousel:"="},link:function(c,d,e){var f,g,h,i=angular.element(d),j=i.find(".viewport:first"),k=i.find(".overview:first"),l=i.find(".next:first"),m=i.find(".prev:first"),n=null;c.carouselID=e.tinyCarousel,c.options={start:0,axis:"x",buttons:!0,bullets:!1,interval:!1,intervalTime:5e3,animation:!0,animationTime:500,infinite:!0},c.options.interval=void 0!==e.tinyCarouselInterval?!0:!1,c.slidesVisible=0,c.slideSize=0,c.slideIndex=0,c.isHorizontal="x"===c.options.axis,c.sizeLabel=c.isHorizontal?"Width":"Height",c.posiLabel=c.isHorizontal?"left":"top",c.slideCurrent=0,c.carouselTemplate="",c.carouselItems=[],c.carouselItemsMirrored=[],f=function(){c.options.interval&&c.slidesVisible<c.carouselItems.length&&(clearTimeout(n),n=setTimeout(function(){c.move(c.slideIndex+1)},c.options.intervalTime))},c.move=function(a){c.$broadcast("tinyCarousel:move",a),f()},c.carouselItemClicked=function(a){c.$parent.$broadcast("tinyCarousel:itemClicked",c.carouselID,a)},g=function(){a(function(){c.carouselItemsMirrored=[],c.$broadcast("tinyCarousel:update"),c.move(0)},1e3)},c.$watch(function(){return c.carouselItems},function(a,b){a!==b&&g()}),c.$on("tinyCarousel:update",function(){var a,d,e=k.children();d="Width"===c.sizeLabel?j.outerWidth(!0):j.outerHeight(!0),a=isNaN(parseInt(j.css(c.posiLabel),10))?0:-1*parseInt(j.css(c.posiLabel),10),c.slideSize="Width"===c.sizeLabel?e.first().outerWidth(!0):e.first().outerHeight(!0),c.slideCurrent=c.options.start||0,c.slidesVisible=Math.ceil((d+a)/c.slideSize),c.slidesVisible<c.carouselItems.length&&(c.carouselItemsMirrored=c.carouselItems.slice(0,c.slidesVisible)),b(function(){k.css(c.sizeLabel.toLowerCase(),c.slideSize*(c.carouselItems.length+c.slidesVisible)),"Width"===c.sizeLabel?j.css("height",e.first().outerHeight(!0)):j.css("width",e.first().outerWidth(!0))})}),c.$on("tinyCarousel:move",function(a,d){var e={};c.slideIndex=d,c.slideCurrent=c.slideIndex%c.carouselItems.length,c.slideIndex<0&&(c.slideCurrent=c.slideIndex=c.carouselItems.length-1,b(function(){k.css(c.posiLabel,-c.carouselItems.length*c.slideSize)})),c.slideIndex>c.carouselItems.length&&(c.slideCurrent=c.slideIndex=1,b(function(){k.css(c.posiLabel,0)})),e[c.posiLabel]=-c.slideIndex*c.slideSize,b(function(){k.animate(e,{queue:!1,duration:c.options.animation?c.options.animationTime:0})})}),c.$watch(function(){return c.slideIndex},function(){c.options.buttons&&!c.options.infinite&&(m.toggleClass("disable",c.slideCurrent<=0),l.toggleClass("disable",c.slideCurrent>=c.carouselItems.length-c.slidesVisible))}),c.$parent.tinyCarousels&&c.carouselID&&c.$parent.tinyCarousels[c.carouselID]&&(h=c.$parent.tinyCarousels[c.carouselID],c.carouselTemplate=h.template||"",c.itemClickDisabled=void 0!==h.clickDisabled?h.clickDisabled:!0,c.carouselItems=c.$parent[h.items],g(),c.$watch(function(){return c.$parent[h.items]},function(a){c.carouselItems=a}))}}}]).factory("$raf",function(){return function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1e3/60)}}()}).directive("compile",["$compile",function(a){return function(b,c,d){b.$watch(function(a){return a.$eval(d.compile)},function(d){c.html(d),a(c.contents())(b)})}}])}();